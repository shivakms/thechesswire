(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[2570],{599:(e,t,s)=>{"use strict";s.d(t,{g:()=>n});var a=s(4205),i=s(6693);function n(){let[e,t]=(0,a.useState)(!1),[s,n]=(0,a.useState)(!1),[r,c]=(0,a.useState)(null);return{playNarration:(0,a.useCallback)(async function(e){let s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"calm";try{t(!0),n(!1),r&&(r.pause(),r.currentTime=0);let a=await fetch("/api/voice/generate",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({text:e,voiceMode:s,voiceId:"PmypFHWgqk9ACZdL8ugT"})});if(!a.ok)throw Error("Failed to generate voice narration");let l=await a.blob(),o=URL.createObjectURL(l),d=new Audio(o);d.volume=.7,d.addEventListener("ended",()=>{n(!1),URL.revokeObjectURL(o)}),d.addEventListener("error",e=>{console.error("Audio playback error:",e),n(!1),t(!1),i.Ay.error("Failed to play voice narration"),URL.revokeObjectURL(o)}),c(d),await d.play(),n(!0),t(!1)}catch(s){if(console.error("Voice narration error:",s),t(!1),n(!1),i.Ay.error("Failed to generate voice narration"),"speechSynthesis"in window){let t=new SpeechSynthesisUtterance(e);t.rate=.9,t.pitch=1.1,t.volume=.7,t.onstart=()=>n(!0),t.onend=()=>n(!1),t.onerror=()=>{n(!1),i.Ay.error("Voice narration failed")},speechSynthesis.speak(t)}}},[r]),stopNarration:(0,a.useCallback)(()=>{r&&(r.pause(),r.currentTime=0,n(!1)),"speechSynthesis"in window&&(speechSynthesis.cancel(),n(!1))},[r]),isLoading:e,isPlaying:s}}},681:(e,t,s)=>{"use strict";s.d(t,{A:()=>a});let a=(0,s(219).A)("Trophy",[["path",{d:"M6 9H4.5a2.5 2.5 0 0 1 0-5H6",key:"17hqa7"}],["path",{d:"M18 9h1.5a2.5 2.5 0 0 0 0-5H18",key:"lmptdp"}],["path",{d:"M4 22h16",key:"57wxv0"}],["path",{d:"M10 14.66V17c0 .55-.47.98-.97 1.21C7.85 18.75 7 20.24 7 22",key:"1nw9bq"}],["path",{d:"M14 14.66V17c0 .55.47.98.97 1.21C16.15 18.75 17 20.24 17 22",key:"1np0yb"}],["path",{d:"M18 2H6v7a6 6 0 0 0 12 0V2Z",key:"u46fv3"}]])},2180:(e,t,s)=>{"use strict";s.d(t,{N:()=>f});var a=s(3049),i=s(4205),n=s(10),r=s(3814),c=s(1234),l=s(5149);class o extends i.Component{getSnapshotBeforeUpdate(e){let t=this.props.childRef.current;if(t&&e.isPresent&&!this.props.isPresent){let e=this.props.sizeRef.current;e.height=t.offsetHeight||0,e.width=t.offsetWidth||0,e.top=t.offsetTop,e.left=t.offsetLeft}return null}componentDidUpdate(){}render(){return this.props.children}}function d(e){let{children:t,isPresent:s}=e,n=(0,i.useId)(),r=(0,i.useRef)(null),c=(0,i.useRef)({width:0,height:0,top:0,left:0}),{nonce:d}=(0,i.useContext)(l.Q);return(0,i.useInsertionEffect)(()=>{let{width:e,height:t,top:a,left:i}=c.current;if(s||!r.current||!e||!t)return;r.current.dataset.motionPopId=n;let l=document.createElement("style");return d&&(l.nonce=d),document.head.appendChild(l),l.sheet&&l.sheet.insertRule('\n          [data-motion-pop-id="'.concat(n,'"] {\n            position: absolute !important;\n            width: ').concat(e,"px !important;\n            height: ").concat(t,"px !important;\n            top: ").concat(a,"px !important;\n            left: ").concat(i,"px !important;\n          }\n        ")),()=>{document.head.removeChild(l)}},[s]),(0,a.jsx)(o,{isPresent:s,childRef:r,sizeRef:c,children:i.cloneElement(t,{ref:r})})}let h=e=>{let{children:t,initial:s,isPresent:n,onExitComplete:l,custom:o,presenceAffectsLayout:h,mode:x}=e,m=(0,r.M)(p),u=(0,i.useId)(),y=(0,i.useCallback)(e=>{for(let t of(m.set(e,!0),m.values()))if(!t)return;l&&l()},[m,l]),f=(0,i.useMemo)(()=>({id:u,initial:s,isPresent:n,custom:o,onExitComplete:y,register:e=>(m.set(e,!1),()=>m.delete(e))}),h?[Math.random(),y]:[n,y]);return(0,i.useMemo)(()=>{m.forEach((e,t)=>m.set(t,!1))},[n]),i.useEffect(()=>{n||m.size||!l||l()},[n]),"popLayout"===x&&(t=(0,a.jsx)(d,{isPresent:n,children:t})),(0,a.jsx)(c.t.Provider,{value:f,children:t})};function p(){return new Map}var x=s(2347);let m=e=>e.key||"";function u(e){let t=[];return i.Children.forEach(e,e=>{(0,i.isValidElement)(e)&&t.push(e)}),t}var y=s(1975);let f=e=>{let{children:t,custom:s,initial:c=!0,onExitComplete:l,presenceAffectsLayout:o=!0,mode:d="sync",propagate:p=!1}=e,[f,g]=(0,x.xQ)(p),j=(0,i.useMemo)(()=>u(t),[t]),v=p&&!f?[]:j.map(m),b=(0,i.useRef)(!0),w=(0,i.useRef)(j),N=(0,r.M)(()=>new Map),[k,S]=(0,i.useState)(j),[A,M]=(0,i.useState)(j);(0,y.E)(()=>{b.current=!1,w.current=j;for(let e=0;e<A.length;e++){let t=m(A[e]);v.includes(t)?N.delete(t):!0!==N.get(t)&&N.set(t,!1)}},[A,v.length,v.join("-")]);let P=[];if(j!==k){let e=[...j];for(let t=0;t<A.length;t++){let s=A[t],a=m(s);v.includes(a)||(e.splice(t,0,s),P.push(s))}"wait"===d&&P.length&&(e=P),M(u(e)),S(j);return}let{forceRender:C}=(0,i.useContext)(n.L);return(0,a.jsx)(a.Fragment,{children:A.map(e=>{let t=m(e),i=(!p||!!f)&&(j===A||v.includes(t));return(0,a.jsx)(h,{isPresent:i,initial:(!b.current||!!c)&&void 0,custom:i?void 0:s,presenceAffectsLayout:o,mode:d,onExitComplete:i?void 0:()=>{if(!N.has(t))return;N.set(t,!0);let e=!0;N.forEach(t=>{t||(e=!1)}),e&&(null==C||C(),M(w.current),p&&(null==g||g()),l&&l())},children:e},t)})})}},2770:(e,t,s)=>{"use strict";s.d(t,{A:()=>a});let a=(0,s(219).A)("Target",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"6",key:"1vlfrh"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]])},2979:(e,t,s)=>{Promise.resolve().then(s.bind(s,5844))},3133:(e,t,s)=>{"use strict";s.d(t,{A:()=>a});let a=(0,s(219).A)("Play",[["polygon",{points:"6 3 20 12 6 21 6 3",key:"1oa8hb"}]])},3158:(e,t,s)=>{"use strict";s.d(t,{A:()=>a});let a=(0,s(219).A)("Zap",[["path",{d:"M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z",key:"1xq2db"}]])},3317:(e,t,s)=>{"use strict";s.d(t,{A:()=>a});let a=(0,s(219).A)("Brain",[["path",{d:"M12 5a3 3 0 1 0-5.997.125 4 4 0 0 0-2.526 5.77 4 4 0 0 0 .556 6.588A4 4 0 1 0 12 18Z",key:"l5xja"}],["path",{d:"M12 5a3 3 0 1 1 5.997.125 4 4 0 0 1 2.526 5.77 4 4 0 0 1-.556 6.588A4 4 0 1 1 12 18Z",key:"ep3f8r"}],["path",{d:"M15 13a4.5 4.5 0 0 1-3-4 4.5 4.5 0 0 1-3 4",key:"1p4c4q"}],["path",{d:"M17.599 6.5a3 3 0 0 0 .399-1.375",key:"tmeiqw"}],["path",{d:"M6.003 5.125A3 3 0 0 0 6.401 6.5",key:"105sqy"}],["path",{d:"M3.477 10.896a4 4 0 0 1 .585-.396",key:"ql3yin"}],["path",{d:"M19.938 10.5a4 4 0 0 1 .585.396",key:"1qfode"}],["path",{d:"M6 18a4 4 0 0 1-1.967-.516",key:"2e4loj"}],["path",{d:"M19.967 17.484A4 4 0 0 1 18 18",key:"159ez6"}]])},5844:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>u});var a=s(3049),i=s(4205),n=s(5729),r=s(2180),c=s(3317),l=s(2770),o=s(6931),d=s(681),h=s(9283),p=s(3133),x=s(3158),m=s(599);function u(){let[e,t]=(0,i.useState)(null),[s,u]=(0,i.useState)(!1),[y,f]=(0,i.useState)(0),[g,j]=(0,i.useState)([]),[v,b]=(0,i.useState)(!1),[w,N]=(0,i.useState)({totalSessions:0,averageScore:0,bestScore:0,timeSpent:0,accuracy:0,streak:0}),{playNarration:k}=(0,m.g)();(0,i.useEffect)(()=>{S()},[]),(0,i.useEffect)(()=>{let t;return s&&e&&(t=setInterval(()=>{f(t=>t>=e.timeLimit?(A(),t):t+1)},1e3)),()=>clearInterval(t)},[s,e]);let S=async()=>{try{let e=await fetch("/api/echosage/stats");if(e.ok){let t=await e.json();N(t)}}catch(e){console.error("Failed to load stats:",e)}},A=()=>{if(!e)return;u(!1);let t=M(),s=P(t);C({...e,completed:!0,score:s}),E(s,t),k("Session complete! Your accuracy was ".concat(Math.round(100*t),"% and you scored ").concat(s," points. ").concat(s>80?"Excellent work!":"Keep practicing!"),"expressive")},M=()=>{if(!e||0===g.length)return 0;let t=0;return g.forEach((s,a)=>{e.solution[a]&&s===e.solution[a]&&t++}),t/Math.max(g.length,e.solution.length)},P=t=>e?Math.round(100+2*Math.max(0,e.timeLimit-y)+50*t):0,C=async e=>{try{await fetch("/api/echosage/save-session",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({sessionId:e.id,score:e.score,timeSpent:y,accuracy:M(),moves:g})})}catch(e){console.error("Failed to save session:",e)}},E=(e,t)=>{N(s=>({totalSessions:s.totalSessions+1,averageScore:(s.averageScore*s.totalSessions+e)/(s.totalSessions+1),bestScore:Math.max(s.bestScore,e),timeSpent:s.timeSpent+y,accuracy:(s.accuracy*s.totalSessions+t)/(s.totalSessions+1),streak:t>.8?s.streak+1:0}))},T=e=>{let t=Math.floor(e/60);return"".concat(t,":").concat((e%60).toString().padStart(2,"0"))};return(0,a.jsx)("div",{className:"min-h-screen chess-gradient-dark",children:(0,a.jsxs)("div",{className:"max-w-7xl mx-auto p-6",children:[(0,a.jsxs)(n.P.div,{className:"text-center mb-12",initial:{opacity:0,y:-20},animate:{opacity:1,y:0},children:[(0,a.jsx)("div",{className:"flex justify-center mb-6",children:(0,a.jsx)(n.P.div,{className:"w-20 h-20 bg-gradient-to-r from-blue-500 to-purple-600 rounded-full flex items-center justify-center glow-effect",animate:{rotate:[0,360]},transition:{duration:20,repeat:1/0,ease:"linear"},children:(0,a.jsx)(c.A,{className:"w-10 h-10 text-white"})})}),(0,a.jsx)("h1",{className:"text-4xl font-bold text-white mb-4",children:"EchoSage Training"}),(0,a.jsx)("p",{className:"text-xl text-gray-300",children:"AI-powered chess training that adapts to your skill level"})]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[(0,a.jsxs)("div",{className:"lg:col-span-1",children:[(0,a.jsxs)(n.P.div,{className:"glass-morphism-dark rounded-2xl p-6 mb-6",initial:{opacity:0,x:-20},animate:{opacity:1,x:0},children:[(0,a.jsx)("h3",{className:"text-xl font-bold text-white mb-4",children:"Your Progress"}),(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsx)("span",{className:"text-gray-300",children:"Total Sessions"}),(0,a.jsx)("span",{className:"text-white font-semibold",children:w.totalSessions})]}),(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsx)("span",{className:"text-gray-300",children:"Average Score"}),(0,a.jsx)("span",{className:"text-white font-semibold",children:Math.round(w.averageScore)})]}),(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsx)("span",{className:"text-gray-300",children:"Best Score"}),(0,a.jsx)("span",{className:"text-white font-semibold",children:w.bestScore})]}),(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsx)("span",{className:"text-gray-300",children:"Accuracy"}),(0,a.jsxs)("span",{className:"text-white font-semibold",children:[Math.round(100*w.accuracy),"%"]})]}),(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsx)("span",{className:"text-gray-300",children:"Current Streak"}),(0,a.jsx)("span",{className:"text-white font-semibold",children:w.streak})]})]})]}),(0,a.jsxs)(n.P.div,{className:"glass-morphism-dark rounded-2xl p-6",initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{delay:.2},children:[(0,a.jsx)("h3",{className:"text-xl font-bold text-white mb-4",children:"Training Types"}),(0,a.jsx)("div",{className:"space-y-3",children:["tactics","endgames","openings","middlegame"].map(e=>(0,a.jsxs)("div",{className:"flex items-center space-x-3 p-3 bg-gray-800 rounded-lg hover:bg-gray-700 transition-colors cursor-pointer",children:[(0,a.jsx)(l.A,{className:"w-5 h-5 text-primary-400"}),(0,a.jsx)("span",{className:"text-white capitalize",children:e})]},e))})]})]}),(0,a.jsx)("div",{className:"lg:col-span-2",children:(0,a.jsx)(r.N,{mode:"wait",children:e?(0,a.jsxs)(n.P.div,{className:"glass-morphism-dark rounded-2xl p-8",initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[(0,a.jsxs)("div",{children:[(0,a.jsxs)("h2",{className:"text-2xl font-bold text-white capitalize",children:[e.type," Training"]}),(0,a.jsxs)("p",{className:"text-gray-300",children:["Difficulty: ",e.difficulty]})]}),(0,a.jsxs)("div",{className:"text-right",children:[(0,a.jsx)("div",{className:"text-2xl font-bold text-white",children:T(y)}),(0,a.jsx)("div",{className:"text-sm text-gray-300",children:"Time Remaining"})]})]}),(0,a.jsxs)("div",{className:"bg-gray-800 rounded-lg p-8 mb-6 text-center",children:[(0,a.jsx)("div",{className:"w-64 h-64 bg-gray-700 rounded-lg mx-auto mb-4 flex items-center justify-center",children:(0,a.jsx)("span",{className:"text-gray-400",children:"Chess Board"})}),(0,a.jsxs)("p",{className:"text-white",children:["Position: ",e.position]})]}),(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{className:"flex space-x-3",children:[(0,a.jsxs)("button",{onClick:()=>u(!s),className:"flex items-center space-x-2 px-4 py-2 bg-primary-500 text-white rounded-lg hover:bg-primary-600 transition-colors",children:[s?(0,a.jsx)(h.A,{className:"w-4 h-4"}):(0,a.jsx)(p.A,{className:"w-4 h-4"}),(0,a.jsx)("span",{children:s?"Pause":"Resume"})]}),(0,a.jsxs)("button",{onClick:()=>b(!v),className:"flex items-center space-x-2 px-4 py-2 bg-accent-500 text-white rounded-lg hover:bg-accent-600 transition-colors",children:[(0,a.jsx)(x.A,{className:"w-4 h-4"}),(0,a.jsxs)("span",{children:[v?"Hide":"Show"," Solution"]})]})]}),(0,a.jsx)("button",{onClick:A,className:"px-6 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700 transition-colors",children:"End Session"})]}),v&&(0,a.jsxs)(n.P.div,{className:"mt-6 p-4 bg-gray-800 rounded-lg",initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},children:[(0,a.jsx)("h4",{className:"text-white font-semibold mb-2",children:"Solution:"}),(0,a.jsx)("div",{className:"flex flex-wrap gap-2 mb-3",children:e.solution.map((e,t)=>(0,a.jsxs)("span",{className:"px-3 py-1 bg-primary-500 text-white rounded text-sm",children:[t+1,". ",e]},t))}),(0,a.jsx)("p",{className:"text-gray-300 text-sm",children:e.explanation})]})]},"active-session"):(0,a.jsxs)(n.P.div,{className:"glass-morphism-dark rounded-2xl p-8",initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},children:[(0,a.jsx)("h2",{className:"text-2xl font-bold text-white mb-6",children:"Choose Your Training Session"}),(0,a.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[{id:"1",type:"tactics",difficulty:"intermediate",position:"r1bqkb1r/pppp1ppp/2n2n2/4p3/2B1P3/5Q2/PPPP1PPP/RNB1K1NR w KQkq - 0 1",solution:["Qxf6","gxf6","Bxf7+","Kxf7","Ne5+"],explanation:"This is a classic Greek Gift sacrifice. White sacrifices the queen to open up the black king and create a devastating attack.",timeLimit:300,completed:!1,score:0},{id:"2",type:"endgames",difficulty:"advanced",position:"8/8/8/8/8/8/4K3/4k3 w - - 0 1",solution:["Ke3","Kd1","Kd3","Ke1","Ke2"],explanation:"This is a basic king and pawn endgame. White must use opposition to win the pawn.",timeLimit:180,completed:!1,score:0}].map(e=>(0,a.jsxs)(n.P.div,{className:"bg-gray-800 rounded-lg p-6 hover:bg-gray-700 transition-colors cursor-pointer",whileHover:{scale:1.02},whileTap:{scale:.98},onClick:()=>{t(e),u(!0),f(0),j([]),b(!1),k("Welcome to EchoSage training. You have ".concat(e.timeLimit," seconds to solve this ").concat(e.type," puzzle. Good luck!"),"expressive")},children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,a.jsx)("h3",{className:"text-lg font-semibold text-white capitalize",children:e.type}),(0,a.jsx)("span",{className:"px-2 py-1 rounded text-xs font-medium ".concat("beginner"===e.difficulty?"bg-green-600 text-white":"intermediate"===e.difficulty?"bg-yellow-600 text-white":"advanced"===e.difficulty?"bg-orange-600 text-white":"bg-red-600 text-white"),children:e.difficulty})]}),(0,a.jsxs)("div",{className:"flex items-center space-x-4 text-sm text-gray-300",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-1",children:[(0,a.jsx)(o.A,{className:"w-4 h-4"}),(0,a.jsx)("span",{children:T(e.timeLimit)})]}),(0,a.jsxs)("div",{className:"flex items-center space-x-1",children:[(0,a.jsx)(d.A,{className:"w-4 h-4"}),(0,a.jsx)("span",{children:"100 pts"})]})]})]},e.id))})]},"session-selection")})})]})]})})}},6931:(e,t,s)=>{"use strict";s.d(t,{A:()=>a});let a=(0,s(219).A)("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]])},9283:(e,t,s)=>{"use strict";s.d(t,{A:()=>a});let a=(0,s(219).A)("Pause",[["rect",{x:"14",y:"4",width:"4",height:"16",rx:"1",key:"zuxfzm"}],["rect",{x:"6",y:"4",width:"4",height:"16",rx:"1",key:"1okwgv"}]])}},e=>{e.O(0,[1327,6693,6562,8036,7358],()=>e(e.s=2979)),_N_E=e.O()}]);