(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[7440],{112:(e,t,a)=>{"use strict";a.d(t,{A:()=>s});let s=(0,a(219).A)("Eye",[["path",{d:"M2 12s3-7 10-7 10 7 10 7-3 7-10 7-10-7-10-7Z",key:"rwhkz3"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]])},425:(e,t,a)=>{Promise.resolve().then(a.bind(a,5661))},599:(e,t,a)=>{"use strict";a.d(t,{g:()=>r});var s=a(4205),l=a(6693);function r(){let[e,t]=(0,s.useState)(!1),[a,r]=(0,s.useState)(!1),[i,n]=(0,s.useState)(null);return{playNarration:(0,s.useCallback)(async function(e){let a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"calm";try{t(!0),r(!1),i&&(i.pause(),i.currentTime=0);let s=await fetch("/api/voice/generate",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({text:e,voiceMode:a,voiceId:"PmypFHWgqk9ACZdL8ugT"})});if(!s.ok)throw Error("Failed to generate voice narration");let o=await s.blob(),c=URL.createObjectURL(o),d=new Audio(c);d.volume=.7,d.addEventListener("ended",()=>{r(!1),URL.revokeObjectURL(c)}),d.addEventListener("error",e=>{console.error("Audio playback error:",e),r(!1),t(!1),l.Ay.error("Failed to play voice narration"),URL.revokeObjectURL(c)}),n(d),await d.play(),r(!0),t(!1)}catch(a){if(console.error("Voice narration error:",a),t(!1),r(!1),l.Ay.error("Failed to generate voice narration"),"speechSynthesis"in window){let t=new SpeechSynthesisUtterance(e);t.rate=.9,t.pitch=1.1,t.volume=.7,t.onstart=()=>r(!0),t.onend=()=>r(!1),t.onerror=()=>{r(!1),l.Ay.error("Voice narration failed")},speechSynthesis.speak(t)}}},[i]),stopNarration:(0,s.useCallback)(()=>{i&&(i.pause(),i.currentTime=0,r(!1)),"speechSynthesis"in window&&(speechSynthesis.cancel(),r(!1))},[i]),isLoading:e,isPlaying:a}}},1752:(e,t,a)=>{"use strict";a.d(t,{A:()=>s});let s=(0,a(219).A)("SkipForward",[["polygon",{points:"5 4 15 12 5 20 5 4",key:"16p6eg"}],["line",{x1:"19",x2:"19",y1:"5",y2:"19",key:"futhcm"}]])},3317:(e,t,a)=>{"use strict";a.d(t,{A:()=>s});let s=(0,a(219).A)("Brain",[["path",{d:"M12 5a3 3 0 1 0-5.997.125 4 4 0 0 0-2.526 5.77 4 4 0 0 0 .556 6.588A4 4 0 1 0 12 18Z",key:"l5xja"}],["path",{d:"M12 5a3 3 0 1 1 5.997.125 4 4 0 0 1 2.526 5.77 4 4 0 0 1-.556 6.588A4 4 0 1 1 12 18Z",key:"ep3f8r"}],["path",{d:"M15 13a4.5 4.5 0 0 1-3-4 4.5 4.5 0 0 1-3 4",key:"1p4c4q"}],["path",{d:"M17.599 6.5a3 3 0 0 0 .399-1.375",key:"tmeiqw"}],["path",{d:"M6.003 5.125A3 3 0 0 0 6.401 6.5",key:"105sqy"}],["path",{d:"M3.477 10.896a4 4 0 0 1 .585-.396",key:"ql3yin"}],["path",{d:"M19.938 10.5a4 4 0 0 1 .585.396",key:"1qfode"}],["path",{d:"M6 18a4 4 0 0 1-1.967-.516",key:"2e4loj"}],["path",{d:"M19.967 17.484A4 4 0 0 1 18 18",key:"159ez6"}]])},4440:(e,t,a)=>{"use strict";a.d(t,{A:()=>s});let s=(0,a(219).A)("SkipBack",[["polygon",{points:"19 20 9 12 19 4 19 20",key:"o2sva"}],["line",{x1:"5",x2:"5",y1:"19",y2:"5",key:"1ocqjk"}]])},5661:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>b});var s=a(3049),l=a(4205),r=a(5729),i=a(4734),n=a(5185),o=a(112),c=a(1262),d=a(4440),h=a(9283),m=a(3133),u=a(1752),x=a(3317),p=a(599);function b(){let[e,t]=(0,l.useState)(new i.d$),[a,b]=(0,l.useState)(-1),[v,y]=(0,l.useState)(!1),[g,w]=(0,l.useState)(2e3),[j,f]=(0,l.useState)(!1),[N,k]=(0,l.useState)(null),[S,A]=(0,l.useState)(!1),[P,C]=(0,l.useState)("expressive"),{playNarration:T,stopNarration:M,isLoading:E}=(0,p.g)(),U=(0,l.useRef)(null);(0,l.useEffect)(()=>{let e=setTimeout(()=>{T("Welcome to Replay Theater, where chess games come alive with AI narration. Upload a PGN file or select a sample game to begin your cinematic journey.","expressive")},1e3);return()=>{clearTimeout(e),M()}},[T,M]),(0,l.useEffect)(()=>(v&&N?U.current=setInterval(()=>{a<N.moves.length-1?I(a+1):(y(!1),T("Game complete! What a beautiful journey through the 64 squares.","dramatic"))},g):U.current&&clearInterval(U.current),()=>{U.current&&clearInterval(U.current)}),[v,a,N,g,T]);let G=async e=>{var a;let s=null==(a=e.target.files)?void 0:a[0];if(s){A(!0);try{let e=await s.text(),a=new i.d$;a.loadPgn(e);let l=[],r=a.history({verbose:!0});r.forEach((e,t)=>{let a=new i.d$;for(let e=0;e<=t;e++)a.move(r[e]);l.push({move:e.lan,san:e.san,fen:a.fen(),evaluation:2*Math.random()-1,commentary:L(e,t)})});let n={id:Date.now().toString(),title:"".concat(a.header("White")," vs ").concat(a.header("Black")),players:{white:a.header("White")||"Unknown",black:a.header("Black")||"Unknown"},result:a.header("Result")||"*",date:a.header("Date")||new Date().toISOString().split("T")[0],event:a.header("Event")||"Unknown Event",moves:l};k(n),t(a),b(-1),T("Game loaded! ".concat(n.title,". ").concat(l.length," moves to replay. Let's begin the cinematic journey."),"expressive")}catch(e){console.error("Error loading PGN:",e),T("Sorry, I couldn't load that PGN file. Please check the format and try again.","calm")}finally{A(!1)}}},L=(e,t)=>{let a=["A bold move that opens up the position.","Strategic retreat to consolidate the position.","Tactical shot that creates complications.","Natural developing move.","Sharp response to the previous move.","Positional improvement.","Tactical opportunity seized.","Defensive resource found.","Initiative maintained.","Counterplay begins."];return a[t%a.length]},I=e=>{if(N&&!(e<-1)&&!(e>=N.moves.length))if(b(e),-1===e)t(new i.d$);else{let a=new i.d$;for(let t=0;t<=e;t++)a.move(N.moves[t].move);t(a);let s=N.moves[e],l=s.commentary||"Interesting move.";T("Move ".concat(e+1,": ").concat(s.san,". ").concat(l),P)}};return(0,s.jsx)("div",{className:"min-h-screen chess-gradient-dark",children:(0,s.jsxs)("div",{className:"max-w-7xl mx-auto p-6",children:[(0,s.jsxs)(r.P.div,{className:"text-center mb-8",initial:{opacity:0,y:-20},animate:{opacity:1,y:0},children:[(0,s.jsx)("div",{className:"flex justify-center mb-4",children:(0,s.jsx)(r.P.div,{className:"w-16 h-16 bg-gradient-to-r from-purple-500 to-pink-600 rounded-full flex items-center justify-center glow-effect",animate:{rotate:[0,360]},transition:{duration:20,repeat:1/0,ease:"linear"},children:(0,s.jsx)(o.A,{className:"w-8 h-8 text-white"})})}),(0,s.jsx)("h1",{className:"text-4xl font-bold text-white mb-2",children:"Replay Theater"}),(0,s.jsx)("p",{className:"text-xl text-gray-300",children:"Watch chess games come alive with AI narration"})]}),(0,s.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[(0,s.jsx)(r.P.div,{className:"lg:col-span-1",initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{delay:.2},children:(0,s.jsxs)("div",{className:"bg-black/20 backdrop-blur-sm rounded-xl p-6 border border-white/10",children:[(0,s.jsx)("h2",{className:"text-2xl font-bold text-white mb-4",children:"Select Game"}),(0,s.jsxs)("div",{className:"mb-6",children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Upload PGN File"}),(0,s.jsxs)("div",{className:"relative",children:[(0,s.jsx)("input",{type:"file",accept:".pgn",onChange:G,className:"hidden",id:"pgn-upload",disabled:S}),(0,s.jsxs)("label",{htmlFor:"pgn-upload",className:"flex items-center justify-center w-full px-4 py-3 bg-gradient-to-r from-blue-500 to-purple-600 text-white rounded-lg cursor-pointer hover:from-blue-600 hover:to-purple-700 transition-all duration-200",children:[(0,s.jsx)(c.A,{className:"w-5 h-5 mr-2"}),S?"Uploading...":"Choose PGN File"]})]})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("h3",{className:"text-lg font-semibold text-white mb-3",children:"Sample Games"}),(0,s.jsx)("div",{className:"space-y-3",children:[{id:"1",title:"The Immortal Game",players:{white:"Adolf Anderssen",black:"Lionel Kieseritzky"},result:"1-0",date:"1851-06-21",event:"London Tournament",moves:[]},{id:"2",title:"Magnus vs Hikaru - 2024 Candidates",players:{white:"Magnus Carlsen",black:"Hikaru Nakamura"},result:"1/2-1/2",date:"2024-04-15",event:"Candidates Tournament",moves:[]}].map(e=>(0,s.jsxs)(r.P.button,{onClick:()=>{k(e),t(new i.d$),b(-1),T("Loading ".concat(e.title,". Get ready for an amazing replay experience."),"expressive")},className:"w-full text-left p-4 bg-white/5 rounded-lg border border-white/10 hover:bg-white/10 transition-all duration-200",whileHover:{scale:1.02},whileTap:{scale:.98},children:[(0,s.jsx)("div",{className:"font-semibold text-white",children:e.title}),(0,s.jsxs)("div",{className:"text-sm text-gray-400",children:[e.players.white," vs ",e.players.black]}),(0,s.jsx)("div",{className:"text-xs text-gray-500",children:e.event})]},e.id))})]})]})}),(0,s.jsx)(r.P.div,{className:"lg:col-span-2",initial:{opacity:0,x:20},animate:{opacity:1,x:0},transition:{delay:.4},children:(0,s.jsx)("div",{className:"bg-black/20 backdrop-blur-sm rounded-xl p-6 border border-white/10",children:N?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)("div",{className:"mb-4",children:[(0,s.jsx)("h2",{className:"text-2xl font-bold text-white mb-2",children:N.title}),(0,s.jsxs)("div",{className:"text-gray-300",children:[N.players.white," vs ",N.players.black," â€¢ ",N.event]})]}),(0,s.jsx)("div",{className:"mb-6",children:(0,s.jsx)(n.Ve,{position:e.fen(),boardWidth:400,customBoardStyle:{borderRadius:"8px",boxShadow:"0 4px 20px rgba(0, 0, 0, 0.3)"}})}),(0,s.jsxs)("div",{className:"flex items-center justify-center space-x-4 mb-6",children:[(0,s.jsx)(r.P.button,{onClick:()=>I(-1),className:"p-3 bg-white/10 rounded-lg hover:bg-white/20 transition-colors",whileHover:{scale:1.1},whileTap:{scale:.9},children:(0,s.jsx)(d.A,{className:"w-5 h-5 text-white"})}),(0,s.jsx)(r.P.button,{onClick:()=>{v?y(!1):y(!0)},className:"p-4 bg-gradient-to-r from-blue-500 to-purple-600 rounded-lg hover:from-blue-600 hover:to-purple-700 transition-all duration-200",whileHover:{scale:1.1},whileTap:{scale:.9},children:v?(0,s.jsx)(h.A,{className:"w-6 h-6 text-white"}):(0,s.jsx)(m.A,{className:"w-6 h-6 text-white"})}),(0,s.jsx)(r.P.button,{onClick:()=>I(N.moves.length-1),className:"p-3 bg-white/10 rounded-lg hover:bg-white/20 transition-colors",whileHover:{scale:1.1},whileTap:{scale:.9},children:(0,s.jsx)(u.A,{className:"w-5 h-5 text-white"})})]}),(0,s.jsx)("div",{className:"max-h-40 overflow-y-auto",children:(0,s.jsx)("div",{className:"grid grid-cols-2 gap-2",children:N.moves.map((e,t)=>(0,s.jsxs)(r.P.button,{onClick:()=>I(t),className:"p-2 text-left rounded ".concat(t===a?"bg-blue-500/20 border border-blue-500/50":"bg-white/5 hover:bg-white/10"," transition-all duration-200"),whileHover:{scale:1.02},children:[(0,s.jsxs)("span",{className:"text-gray-400 text-sm",children:[Math.floor(t/2)+1,"."]}),(0,s.jsx)("span",{className:"text-white ml-2",children:e.san})]},t))})})]}):(0,s.jsxs)("div",{className:"text-center py-12",children:[(0,s.jsx)(o.A,{className:"w-16 h-16 text-gray-500 mx-auto mb-4"}),(0,s.jsx)("h3",{className:"text-xl font-semibold text-gray-300 mb-2",children:"No Game Selected"}),(0,s.jsx)("p",{className:"text-gray-500",children:"Upload a PGN file or select a sample game to begin"})]})})})]}),(0,s.jsx)(r.P.div,{className:"mt-8",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.6},children:(0,s.jsxs)("div",{className:"bg-black/20 backdrop-blur-sm rounded-xl p-6 border border-white/10",children:[(0,s.jsx)("h3",{className:"text-xl font-bold text-white mb-4",children:"Theater Settings"}),(0,s.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Playback Speed"}),(0,s.jsxs)("select",{value:g,onChange:e=>w(Number(e.target.value)),className:"w-full px-3 py-2 bg-white/10 border border-white/20 rounded-lg text-white focus:outline-none focus:border-blue-500",children:[(0,s.jsx)("option",{value:1e3,children:"Fast (1s)"}),(0,s.jsx)("option",{value:2e3,children:"Normal (2s)"}),(0,s.jsx)("option",{value:3e3,children:"Slow (3s)"}),(0,s.jsx)("option",{value:5e3,children:"Very Slow (5s)"})]})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Narration Style"}),(0,s.jsxs)("select",{value:P,onChange:e=>C(e.target.value),className:"w-full px-3 py-2 bg-white/10 border border-white/20 rounded-lg text-white focus:outline-none focus:border-blue-500",children:[(0,s.jsx)("option",{value:"calm",children:"Calm"}),(0,s.jsx)("option",{value:"expressive",children:"Expressive"}),(0,s.jsx)("option",{value:"dramatic",children:"Dramatic"})]})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Show Analysis"}),(0,s.jsxs)("button",{onClick:()=>f(!j),className:"w-full px-3 py-2 rounded-lg border transition-all duration-200 ".concat(j?"bg-blue-500/20 border-blue-500/50 text-blue-300":"bg-white/10 border-white/20 text-white hover:bg-white/20"),children:[(0,s.jsx)(x.A,{className:"w-4 h-4 inline mr-2"}),j?"Enabled":"Disabled"]})]})]})]})})]})})}}},e=>{e.O(0,[8895,1327,6693,8563,6562,8036,7358],()=>e(e.s=425)),_N_E=e.O()}]);