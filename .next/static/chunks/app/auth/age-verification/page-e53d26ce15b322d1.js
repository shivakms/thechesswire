(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[8899],{4005:(e,t,s)=>{"use strict";var a=s(4913);s.o(a,"useRouter")&&s.d(t,{useRouter:function(){return a.useRouter}}),s.o(a,"useSearchParams")&&s.d(t,{useSearchParams:function(){return a.useSearchParams}})},4500:(e,t,s)=>{"use strict";s.d(t,{A:()=>a});let a=(0,s(219).A)("TriangleAlert",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]])},5653:(e,t,s)=>{"use strict";s.d(t,{A:()=>a});let a=(0,s(219).A)("CircleCheckBig",[["path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14",key:"g774vq"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]])},5793:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>p});var a=s(3049),r=s(4205),i=s(5729),l=s(6025),n=s(5653),c=s(4500),o=s(8463),d=s(1573),m=s(6796),u=s(7899),h=s(4005),x=s(6693);let y=u.Ik({dateOfBirth:u.Yj().min(1,"Date of birth is required"),consent:u.zM().refine(e=>!0===e,"You must agree to the terms")});function p(){let[e,t]=(0,r.useState)(!1),[s,u]=(0,r.useState)(null),p=(0,h.useSearchParams)(),f=(0,h.useRouter)(),g=p.get("redirect")||"/dashboard",{register:j,handleSubmit:v,watch:b,formState:{errors:N}}=(0,d.mN)({resolver:(0,m.u)(y)}),w=b("dateOfBirth");b("consent"),r.useEffect(()=>{if(w){let e=new Date(w),t=new Date,s=t.getFullYear()-e.getFullYear(),a=t.getMonth()-e.getMonth();a<0||0===a&&t.getDate()<e.getDate()?u(s-1):u(s)}},[w]);let A=async e=>{if(s){t(!0);try{let t=await fetch("/api/auth/age-verification",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({dateOfBirth:e.dateOfBirth,age:s,consent:e.consent})});if(t.ok)x.Ay.success("Age verification completed successfully!"),f.push(g);else{let e=await t.json();x.Ay.error(e.message||"Age verification failed")}}catch(e){x.Ay.error("Age verification failed")}finally{t(!1)}}},k=s?s>=18?{status:"adult",message:"You are eligible to use all features",color:"text-green-400"}:{status:"too_young",message:"You must be at least 18 years old to use this service",color:"text-red-400"}:{status:"unknown",message:"",color:""};return(0,a.jsx)("div",{className:"min-h-screen chess-gradient-dark flex items-center justify-center p-4",children:(0,a.jsxs)("div",{className:"w-full max-w-md",children:[(0,a.jsxs)(i.P.div,{className:"glass-morphism-dark rounded-2xl p-8 shadow-2xl",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.6},children:[(0,a.jsxs)("div",{className:"text-center mb-8",children:[(0,a.jsx)(i.P.div,{className:"w-16 h-16 bg-primary-500 rounded-full flex items-center justify-center mx-auto mb-4 glow-effect",whileHover:{scale:1.1},children:(0,a.jsx)(l.A,{className:"w-8 h-8 text-white"})}),(0,a.jsx)("h1",{className:"text-2xl font-bold text-white mb-2",children:"Age Verification Required"}),(0,a.jsx)("p",{className:"text-gray-300",children:"To comply with GDPR regulations, you must be 18 years or older to use this service."})]}),null!==s&&(0,a.jsxs)(i.P.div,{className:"mb-6 p-4 rounded-lg border",initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},transition:{delay:.2},children:["adult"===k.status&&(0,a.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,a.jsx)(n.A,{className:"w-6 h-6 text-green-400"}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h3",{className:"font-semibold text-green-400",children:"Adult User"}),(0,a.jsxs)("p",{className:"text-sm text-gray-300",children:["Age: ",s," years old"]})]})]}),"too_young"===k.status&&(0,a.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,a.jsx)(c.A,{className:"w-6 h-6 text-red-400"}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h3",{className:"font-semibold text-red-400",children:"Age Restriction"}),(0,a.jsx)("p",{className:"text-sm text-gray-300",children:"You must be at least 18 years old to use this service"})]})]})]}),(0,a.jsxs)("form",{onSubmit:v(A),className:"space-y-6",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Date of Birth *"}),(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsx)(l.A,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-5 h-5"}),(0,a.jsx)("input",{type:"date",...j("dateOfBirth"),max:new Date().toISOString().split("T")[0],className:"w-full pl-10 pr-4 py-3 bg-gray-800 border border-gray-600 rounded-lg text-white focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-transparent"})]}),N.dateOfBirth&&(0,a.jsx)("p",{className:"text-red-400 text-sm mt-1",children:N.dateOfBirth.message})]}),(0,a.jsx)("div",{className:"p-4 bg-gray-800/50 rounded-lg",children:(0,a.jsxs)("label",{className:"flex items-start space-x-3",children:[(0,a.jsx)("input",{type:"checkbox",...j("consent"),className:"w-4 h-4 text-primary-500 bg-gray-800 border-gray-600 rounded focus:ring-primary-500 focus:ring-2 mt-1"}),(0,a.jsxs)("div",{children:[(0,a.jsxs)("span",{className:"text-sm text-gray-300",children:["I agree to the"," ",(0,a.jsx)("a",{href:"/terms",className:"text-primary-400 hover:text-primary-300 underline",children:"Terms of Service"})," ","and"," ",(0,a.jsx)("a",{href:"/privacy",className:"text-primary-400 hover:text-primary-300 underline",children:"Privacy Policy"})]}),N.consent&&(0,a.jsx)("p",{className:"text-red-400 text-xs mt-1",children:N.consent.message})]})]})}),(0,a.jsx)(i.P.button,{type:"submit",disabled:e||null===s||"too_young"===k.status,className:"w-full bg-gradient-to-r from-primary-500 to-accent-500 text-white font-semibold py-3 rounded-lg hover:from-primary-600 hover:to-accent-600 transition-all duration-300 disabled:opacity-50 disabled:cursor-not-allowed glow-effect flex items-center justify-center space-x-2",whileHover:{scale:1.02},whileTap:{scale:.98},children:e?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(i.P.div,{className:"w-5 h-5 border-2 border-white border-t-transparent rounded-full",animate:{rotate:360},transition:{duration:1,repeat:1/0,ease:"linear"}}),(0,a.jsx)("span",{children:"Verifying..."})]}):"too_young"===k.status?(0,a.jsx)("span",{children:"Age Restriction"}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("span",{children:"Complete Verification"}),(0,a.jsx)(o.A,{className:"w-4 h-4"})]})})]}),"too_young"===k.status&&(0,a.jsx)(i.P.div,{className:"mt-6 text-center",initial:{opacity:0},animate:{opacity:1},transition:{delay:.3},children:(0,a.jsx)("p",{className:"text-gray-400 text-sm",children:"Unfortunately, you cannot use this service at this time. Please return when you are 18 years or older."})})]}),(0,a.jsx)(i.P.div,{className:"mt-6 text-center",initial:{opacity:0},animate:{opacity:1},transition:{delay:.5},children:(0,a.jsx)("p",{className:"text-gray-400 text-xs",children:"\uD83D\uDD10 Age verification is required for GDPR compliance and user safety."})})]})})}},6025:(e,t,s)=>{"use strict";s.d(t,{A:()=>a});let a=(0,s(219).A)("Calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]])},7199:(e,t,s)=>{Promise.resolve().then(s.bind(s,5793))},8463:(e,t,s)=>{"use strict";s.d(t,{A:()=>a});let a=(0,s(219).A)("ArrowRight",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]])}},e=>{e.O(0,[1327,6693,7072,6562,8036,7358],()=>e(e.s=7199)),_N_E=e.O()}]);